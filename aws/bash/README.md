# Bash scripts demonstrating how to start up AWS instances
*NVIDIA/ngc_examples/aws/bash/README.md*

These are low level bash files that show all the steps required to create aws instances and efs volumes and show the various commands that can be used to access them.

* **aws_create_instance.sh**
    This bash script shows all the steps necessary to find AMI image and security groups by name, create instance, and optionally create EBS volume, mount multiple EBS volume bring up ssh shell. Highly configurable via a user supplied configuration file.

```
aws_create_instance:  Creates aws instance, optionally mounts EFS or EBS volumes

usage:
   [options] [config-file]

Options:
    -h, help                prints this help message
```

* **aws_create_efs.sh**
    Create a EFS volume and set up its mount targets

```
aws_create_efs:  Creates efs volume and assigns mount points to it

usage:
   [options] [config-file]

Options:
    -h, help               prints this help message
```

* **aws_last.sh**
    Shows how to start/stop/terminate/check state of instance via ID. Uses a small file that was generated by aws_create_instance was run to save the ID and name of that instance. 


```
aws_last:  connects to or preforms other actions to last instance created

usage:
   aws_last [options]

Options:
   state                    shows current state
   stop                     stops instance if running
   terminate                terminates instance if running
   showssh                  displays ssh command needed
   -h, help                 displays this help text
   (no arguments)           starts if not running, ssh into it when ready
```
* **sample.cfg**
    Sample configuation file used by *aws_create_instance*, that can be used to override any of the built in default values. This file can be used as a template for your modifications. 

* **sample.efscfg**
    Sample Configuration file used by *aws_create_efs*

### Usage of configuration files
Both *aws_create_instance.sh* and *aws_create_efs.sh* accept an optional config file to set some or all of it's parameters. The top of these files contains a number of variables of the form 

```
VAR_NAME="<YOUR VALUE HERE>"    # values you need to supply
VAR1_NAME=1                     # default values that should work, but check for your usage
```

Instead of changing these script directly, you can copy the top portion of them, where all the variables are into another file, and then modify them as needed. The file *sample.cfg* and *sample.efscfg* are examples of this. 


```
cp sample.cfg work.cfg           # create a copy of the template
vi work.cfg                      # make changes
aws_create_instance work.cfg     # new instances with modified settings
```

